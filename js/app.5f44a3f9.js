(function(e){function t(t){for(var r,u,o=t[0],i=t[1],l=t[2],f=0,d=[];f<o.length;f++)u=o[f],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&d.push(a[u][0]),a[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);s&&s(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},c=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/2048/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=i;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},"6e5a":function(e,t,n){"use strict";n("f901")},a6ac:function(e,t,n){"use strict";n("e7b2")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"scoreboard"};function c(e,t,n,c,u,o){var i=Object(r["s"])("GameBoard");return Object(r["m"])(),Object(r["e"])("div",null,[Object(r["h"])("div",a,[Object(r["g"])(" score: "+Object(r["t"])(e.score)+" plays: "+Object(r["t"])(e.playCount)+" ",1),e.isFullscreen?Object(r["f"])("",!0):(Object(r["m"])(),Object(r["e"])("button",{key:0,onClick:t[1]||(t[1]=function(){return e.toggleFullscreen&&e.toggleFullscreen.apply(e,arguments)})},"fullscreen")),Object(r["h"])("button",{onClick:t[2]||(t[2]=function(){return e.reset&&e.reset.apply(e,arguments)})},"reset")]),Object(r["h"])(i,{state:e.game,playable:e.playable,onRestart:e.reset},null,8,["state","playable","onRestart"])])}var u=Object(r["v"])("data-v-dbc055ae");Object(r["o"])("data-v-dbc055ae");var o={key:0,class:"gameover"},i=Object(r["h"])("p",null,"game over",-1);Object(r["n"])();var l,s=u((function(e,t,n,a,c,l){return Object(r["m"])(),Object(r["e"])(r["b"],{name:"tiles",tag:"div",style:{"--size-x":e.state.size.x,"--size-y":e.state.size.y},class:["gameboard"]},{default:u((function(){return[(Object(r["m"])(!0),Object(r["e"])(r["a"],null,Object(r["r"])(e.state.data,(function(t,n){return Object(r["m"])(),Object(r["e"])("div",{class:["tile","tile-".concat(t.value)],key:t.id,title:t.id,style:{"grid-row":"".concat(e.getY(n,e.state.size.x)+1),"grid-column":"".concat(e.getX(n,e.state.size.y)+1)}},Object(r["t"])(t.value?t.value:""),15,["title"])})),128)),e.playable?Object(r["f"])("",!0):(Object(r["m"])(),Object(r["e"])("div",o,[Object(r["h"])("div",null,[i,Object(r["h"])("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("restart")})},"restart")])]))]})),_:1},8,["style"])})),f=n("5c40"),d=n("2909"),v=n("5530");n("caad"),n("2532"),n("d81d"),n("cb29"),n("99af"),n("ac1f"),n("5319"),n("d3b7"),n("25f0");function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function p(e){return e.reduce((function(e,t,n){return 0===t?[].concat(Object(d["a"])(e),[n]):e}),[])}function O(e){var t=Math.floor(Math.random()*e.length);return e[t]}function g(e){return[l.RIGHT,l.DOWN].includes(e)}function j(e){return[l.UP,l.DOWN].includes(e)}function m(e){return{size:Object(v["a"])({},e.size),data:e.data.map((function(e){return Object(v["a"])({},e)}))}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n={size:{x:e,y:t},data:k(Array(e*t).fill(0))};return n}function y(e){for(var t=0,n=1,r=e.reduce((function(e,t){return e+t[n]}),0),a=e.sort((function(e,t){return t[n]-e[n]})).reduce((function(e,a){var c=[a[t],a[n]/r];return[].concat(Object(d["a"])(e),[c])}),[]),c=a.map((function(e){return e[1]})),u=a.map((function(e){return e[0]})),o=Math.random(),i=c.length-1,l=0,s=u[i],f=0;f<i;++f)if(l+=c[f],o<l){s=u[f];break}return s}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(v["a"])({times:1,probability:[[4,1],[2,9]]},t),r=Object(d["a"])(e.data),a=0;a<n.times;a++){var c=p(r.map((function(e){return e.value}))),u=O(c),o=y(n.probability);r[u].value=o}return Object(v["a"])(Object(v["a"])({},e),{},{data:r})}function w(e,t){return!e.data.some((function(e,n){return e.value!==t.data[n].value}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return e.map((function(e){return{value:e,id:t()}}))}function F(e,t){for(var n=g(t),r=n?-1:1,a=k(Array(e.length).fill(0)),c=e.length-1,u=0,o=0;u<e.length;u++){var i=n?c-u:u,l=n?c-o:o,s=i+r;while(0===(null===(f=e[s])||void 0===f?void 0:f.value)){var f;s+=r}var d=e[i],v=e[s];0!==(null===d||void 0===d?void 0:d.value)&&(a[l]=d),(null===d||void 0===d?void 0:d.value)===(null===v||void 0===v?void 0:v.value)&&(a[l].value+=v.value,u+=Math.abs(i-s)),0!==a[l].value&&o++}return a}function P(e,t){var n=j(t),r=n?e.size.x:e.size.y,a=e.data.reduce((function(e,t,a){var c=L(a,r),u=T(a,r),o=n?u:c,i=n?c:u;return null==e[o]&&(e[o]=[]),e[o][i]=t,e}),[]);return a}function E(e,t){for(var n=j(t),r=e.length*e[0].length,a=[],c=0;c<r;c++){var u=L(c,e[0].length),o=T(c,e[0].length),i=n?o:u,l=n?u:o;a[c]=e[i][l]}return a}function z(e,t){var n=P(e,t),r=n.map((function(e){return F(e,t)})),a=E(r,t);return Object(v["a"])(Object(v["a"])({},e),{},{data:a})}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e%t}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.floor(e/t)}(function(e){e[e["UP"]=0]="UP",e[e["DOWN"]=1]="DOWN",e[e["LEFT"]=2]="LEFT",e[e["RIGHT"]=3]="RIGHT"})(l||(l={}));var M=Object(f["k"])({props:{state:{type:Object},playable:{default:!0}},setup:function(){return{getX:T,getY:L}}});n("6e5a");M.render=s,M.__scopeId="data-v-dbc055ae";var S=M,R=(n("b0c0"),n("3ca3"),n("ddb0"),n("2b3d"),n("841c"),n("6125")),_=n.n(R);function A(e,t){var n=function(n){n.key===e&&t()};Object(r["k"])((function(){document.addEventListener("keyup",n)})),Object(r["l"])((function(){document.removeEventListener("keyup",n)}))}function D(){var e=Object(r["q"])(!!document.fullscreenElement),t=function(){e.value=!!document.fullscreenElement};function n(){var e=document.querySelector("#app");e&&!document.fullscreenElement?e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))})):document.exitFullscreen()}return Object(r["k"])((function(){document.addEventListener("fullscreenchange",t)})),Object(r["l"])((function(){document.removeEventListener("fullscreenchange",t)})),{toggleFullscreen:n,isFullscreen:e}}function G(e){var t=Object(r["q"])(e||b());function n(e){var n=e||b();return Object(r["j"])(t)&&(t.value=n),_()(n,{global:!0}),n}return n(t.value),{seed:t,reset:n}}function U(e){var t=new URLSearchParams(window.location.search),n=Object(r["q"])(t.get(e)||void 0);return Object(r["u"])(n,(function(n){n?t.set(e,n):t.delete(e);var r=window.location.pathname+"?"+t.toString();window.history.replaceState(null,"",r)}),{immediate:!0}),n}n("262e"),n("2caf");var q=n("d4ec"),I=n("bee2"),N=function(e){return e.data.reduce((function(e,t){var n=t.value;return e+n}),0)},W=function(){function e(){var t=this;Object(q["a"])(this,e),this.game=Object(r["p"])(this.create()),this.playable=Object(r["c"])((function(){return t.isPlayable()})),this.score=Object(r["c"])((function(){return N(m(t.game))})),Object(r["u"])(this.score,(function(e,t){e<=t&&console.error("Error ".concat(t,"->").concat(e))}))}return Object(I["a"])(e,[{key:"create",value:function(){var e=h();return e=x(e,{times:2}),e}},{key:"reset",value:function(){Object.assign(this.game,this.create())}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=z(m(this.game),e);return w(n,this.game)||(n=x(n)),t||Object.assign(this.game,n),n}},{key:"isPlayable",value:function(){var e=this;return p(this.game.data.map((function(e){return e.value}))).length>0||[l.UP,l.RIGHT,l.DOWN,l.LEFT].some((function(t){return!w(e.game,e.play(t,!0))}))}}]),e}(),C=Object(r["i"])({name:"App",components:{GameBoard:S},setup:function(){var e=U("seed"),t=G(e),n=t.reset,a=D(),c=a.toggleFullscreen,u=a.isFullscreen,o=Object(r["q"])(0),i=new W;function s(e){o.value++,i.play(e)}return A("ArrowUp",(function(){return s(l.UP)})),A("ArrowDown",(function(){return s(l.DOWN)})),A("ArrowLeft",(function(){return s(l.LEFT)})),A("ArrowRight",(function(){return s(l.RIGHT)})),{reset:function(){n(),i.reset()},game:i.game,playable:i.playable,score:i.score,toggleFullscreen:c,isFullscreen:u,playCount:o}}});n("a6ac");C.render=c;var H=C;Object(r["d"])(H).mount("#app")},e7b2:function(e,t,n){},f901:function(e,t,n){}});
//# sourceMappingURL=app.5f44a3f9.js.map