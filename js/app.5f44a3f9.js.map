{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/GameBoard.vue?7338","webpack:///./src/App.vue?b103","webpack:///./src/App.vue","webpack:///./src/components/GameBoard.vue","webpack:///./src/gameplay.ts","webpack:///./src/util.ts","webpack:///./src/components/GameBoard.vue?e156","webpack:///./src/components/GameBoard.vue?83d7","webpack:///./src/hooks.ts","webpack:///./src/gamemode.ts","webpack:///./src/App.vue?1d14","webpack:///./src/App.vue?97f5","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","score","playCount","isFullscreen","toggleFullscreen","reset","state","game","playable","PHASE","tag","style","size","x","y","tile","id","title","$emit","uuidv4","replace","Math","random","v","toString","getZeroIndexes","lst","reduce","getRandomElement","idx","floor","isInverted","phase","RIGHT","DOWN","includes","isColumnar","UP","clone","map","el","createGame","toTiles","Array","fill","probably","probabilities","VALUE","WEIGHT","totalWeight","mem","lookup","sort","a","b","weights","results","num","lastIndex","insertRandom","matrix","config","_config","times","probability","zeroIndexes","randIdx","equal","some","mergeRow","invert","offset","res","maxIdx","cursor","curs","nextIdx","currTile","nextTile","abs","splitGroups","columnar","width","groups","row","getY","col","getX","flattenGroups","merge","merged","props","type","default","setup","render","__scopeId","useKey","cb","conditionalCb","evt","document","addEventListener","removeEventListener","useFullscreen","fullscreenElement","elem","querySelector","requestFullscreen","catch","err","alert","message","exitFullscreen","useSeed","seed","global","useParam","qps","URLSearchParams","location","search","undefined","val","set","delete","url","pathname","history","replaceState","immediate","calcScore","this","isPlayable","currScore","prevScore","console","error","g","assign","dryrun","nextGame","LEFT","play","components","GameBoard","resetSeed","zgame","App","mount"],"mappings":"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","file":"js/app.5f44a3f9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/2048/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GameBoard.vue?vue&type=style&index=0&id=dbc055ae&lang=scss&scoped=true\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=7888928c&lang=css\"","<template>\n  <div>\n    <div class=\"scoreboard\">\n      score: {{ score }} plays: {{ playCount }}\n      <button @click=\"toggleFullscreen\" v-if=\"!isFullscreen\">fullscreen</button>\n      <button @click=\"reset\">reset</button>\n    </div>\n    <GameBoard :state=\"game\" :playable=\"playable\" @restart=\"reset\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport GameBoard from \"./components/GameBoard.vue\";\nimport { PHASE } from \"./gameplay\";\nimport { useFullscreen, useKey, useParam, useSeed } from \"./hooks\";\nimport { Twenty48 } from \"./gamemode\";\n\nexport default defineComponent({\n  name: \"App\",\n\n  components: {\n    GameBoard,\n  },\n\n  setup() {\n    const seed = useParam(\"seed\");\n    const { reset: resetSeed } = useSeed(seed);\n    const { toggleFullscreen, isFullscreen } = useFullscreen();\n    const playCount = ref(0);\n\n    const zgame = new Twenty48();\n\n    function play(phase: PHASE) {\n      playCount.value++;\n      zgame.play(phase);\n    }\n\n    useKey(\"ArrowUp\", () => play(PHASE.UP));\n    useKey(\"ArrowDown\", () => play(PHASE.DOWN));\n    useKey(\"ArrowLeft\", () => play(PHASE.LEFT));\n    useKey(\"ArrowRight\", () => play(PHASE.RIGHT));\n\n    return {\n      reset: () => {\n        resetSeed();\n        zgame.reset();\n      },\n      game: zgame.game,\n      playable: zgame.playable,\n      score: zgame.score,\n      toggleFullscreen,\n      isFullscreen,\n      playCount,\n    };\n  },\n});\n</script>\n\n<style>\nbody,\n#app {\n  background: #efefef;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica,\n    Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n}\n\n#app {\n  display: grid;\n  place-items: center;\n}\n\n.scoreboard {\n  font-size: 24px;\n  margin: 8px 0;\n}\n</style>\n","<template>\n  <transition-group\n    name=\"tiles\"\n    tag=\"div\"\n    :style=\"{ '--size-x': state.size.x, '--size-y': state.size.y }\"\n    :class=\"['gameboard']\"\n  >\n    <div\n      :class=\"['tile', `tile-${tile.value}`]\"\n      v-for=\"(tile, i) in state.data\"\n      :key=\"tile.id\"\n      :title=\"tile.id\"\n      :style=\"{\n        'grid-row': `${getY(i, state.size.x) + 1}`,\n        'grid-column': `${getX(i, state.size.y) + 1}`,\n      }\"\n    >\n      {{ tile.value ? tile.value : \"\" }}\n    </div>\n    <div class=\"gameover\" v-if=\"!playable\">\n      <div>\n        <p>game over</p>\n        <button @click=\"$emit('restart')\">restart</button>\n      </div>\n    </div>\n  </transition-group>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"@vue/runtime-core\";\nimport { getX, getY, Matrix } from \"@/gameplay\";\n\nexport default defineComponent({\n  props: {\n    state: {\n      type: Object as PropType<Matrix>,\n    },\n    playable: {\n      default: true,\n    },\n  },\n  setup() {\n    return {\n      getX,\n      getY,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n@use \"sass:list\";\n\n.gameboard {\n  --tile-size: 120px;\n  --size-x: 4;\n  --size-y: 4;\n\n  display: grid;\n  grid-template-columns: repeat(var(--size-y), var(--tile-size));\n  grid-template-rows: repeat(var(--size-x), var(--tile-size));\n  row-gap: 8px;\n  column-gap: 8px;\n  background-color: #fff;\n  padding: 8px;\n  border-radius: 8px;\n\n  position: relative;\n}\n\n.gameover {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #00000044;\n  border-radius: 8px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.tile {\n  border-radius: 4px;\n  height: 100%;\n  width: 100%;\n\n  display: grid;\n  place-items: center;\n\n  font-size: calc(var(--tile-size) / var(--size-y));\n}\n\n$colors: #e3e7f5, #c7ceea, #daf5eb, #b5ead7, #f1f8e5, #e2f0cb, #ffede0, #ffdac1,\n  #ffdbd9, #ffb7b2, #ffcdd1, #ff9aa2;\n\n@for $i from 1 through 12 {\n  .tile-#{math.pow(2, $i)} {\n    background-color: list.nth($colors, $i);\n    color: scale-color(\n      list.nth($colors, $i),\n      $lightness: -50%,\n      $saturation: -30%\n    );\n  }\n}\n\n.tiles-enter-from {\n  opacity: 0;\n}\n\n.tiles-enter-active {\n  transition: all 0.25s ease;\n}\n\n.tiles-move {\n  transition: transform 0.125s ease;\n}\n</style>\n","import { getRandomElement, getZeroIndexes, uuidv4 } from \"./util\";\n\nexport enum PHASE {\n  UP,\n  DOWN,\n  LEFT,\n  RIGHT,\n}\n\nexport type Tile = {\n  value: number;\n  id: string;\n};\n\nexport type Matrix = {\n  data: Tile[];\n  size: {\n    x: number;\n    y: number;\n  };\n};\n\nfunction isInverted(phase: PHASE): boolean {\n  return [PHASE.RIGHT, PHASE.DOWN].includes(phase);\n}\n\nfunction isColumnar(phase: PHASE): boolean {\n  return [PHASE.UP, PHASE.DOWN].includes(phase);\n}\n\nexport function clone(game: Matrix): Matrix {\n  return {\n    size: { ...game.size },\n    data: game.data.map((el) => ({ ...el })),\n  };\n}\n\nexport function createGame(x = 4, y = 4): Matrix {\n  const game: Matrix = {\n    size: { x, y },\n    data: toTiles(Array(x * y).fill(0)),\n  };\n\n  return game;\n}\n\ntype Pair = [number, number];\n\ninterface InsertRandomConfig {\n  times: number;\n  probability: Pair[];\n}\n\nexport function probably(probabilities: Pair[]): number {\n  const VALUE = 0;\n  const WEIGHT = 1;\n\n  const totalWeight = probabilities.reduce((mem, el) => mem + el[WEIGHT], 0);\n  const lookup = probabilities\n    .sort((a, b) => b[WEIGHT] - a[WEIGHT])\n    .reduce((mem: Pair[], el): Pair[] => {\n      const n: Pair = [el[VALUE], el[WEIGHT] / totalWeight];\n      return [...mem, n];\n    }, []);\n\n  const weights = lookup.map((el) => el[1]);\n  const results = lookup.map((el) => el[0]);\n\n  const num = Math.random(),\n    lastIndex = weights.length - 1;\n  let s = 0;\n  let result = results[lastIndex];\n\n  for (let i = 0; i < lastIndex; ++i) {\n    s += weights[i];\n    if (num < s) {\n      result = results[i];\n\n      break;\n    }\n  }\n\n  return result;\n}\n\nexport function insertRandom(\n  matrix: Matrix,\n  config: Partial<InsertRandomConfig> = {}\n): Matrix {\n  const _config: InsertRandomConfig = {\n    times: 1,\n    probability: [\n      [4, 1],\n      [2, 9],\n    ],\n    ...config,\n  };\n\n  const data = [...matrix.data];\n\n  for (let i = 0; i < _config.times; i++) {\n    const zeroIndexes = getZeroIndexes(data.map((v) => v.value));\n    const randIdx = getRandomElement(zeroIndexes);\n\n    const value = probably(_config.probability);\n\n    data[randIdx].value = value;\n  }\n\n  return {\n    ...matrix,\n    data,\n  };\n}\n\nexport function equal(a: Matrix, b: Matrix): boolean {\n  return !a.data.some((v, i) => v.value !== b.data[i].value);\n}\n\nfunction toTiles(lst: number[], id: () => string = uuidv4): Tile[] {\n  return lst.map((v) => ({ value: v, id: id() }));\n}\n\nexport function mergeRow(lst: Tile[], phase: PHASE): Tile[] {\n  const invert = isInverted(phase);\n  const offset = !invert ? 1 : -1;\n  const res: Tile[] = toTiles(Array(lst.length).fill(0));\n\n  const maxIdx = lst.length - 1;\n\n  for (let i = 0, cursor = 0; i < lst.length; i++) {\n    // Invert the pointers when phase is inverted.\n    const idx = !invert ? i : maxIdx - i;\n    const curs = !invert ? cursor : maxIdx - cursor;\n\n    // Calculate the adjacent index.\n    let nextIdx = idx + offset;\n    while (lst[nextIdx]?.value === 0) {\n      nextIdx += offset;\n    }\n\n    const currTile = lst[idx];\n    const nextTile = lst[nextIdx];\n\n    if (currTile?.value !== 0) {\n      res[curs] = currTile;\n    }\n\n    if (currTile?.value === nextTile?.value) {\n      res[curs].value += nextTile.value;\n      i += Math.abs(idx - nextIdx);\n    }\n\n    if (res[curs].value !== 0) {\n      cursor++;\n    }\n  }\n\n  return res;\n}\n\nexport function splitGroups(matrix: Matrix, phase: PHASE): Tile[][] {\n  const columnar = isColumnar(phase);\n  const width = columnar ? matrix.size.x : matrix.size.y;\n\n  const groups: Tile[][] = matrix.data.reduce((mem: Tile[][], v, i) => {\n    const row = getY(i, width);\n    const col = getX(i, width);\n    const x = columnar ? col : row;\n    const y = columnar ? row : col;\n\n    if (mem[x] == null) mem[x] = [];\n\n    mem[x][y] = v;\n\n    return mem;\n  }, []);\n\n  return groups;\n}\n\nexport function flattenGroups(groups: Tile[][], phase: PHASE): Tile[] {\n  const columnar = isColumnar(phase);\n  const size = groups.length * groups[0].length;\n\n  const res = [];\n\n  for (let i = 0; i < size; i++) {\n    const row = getY(i, groups[0].length);\n    const col = getX(i, groups[0].length);\n    const x = columnar ? col : row;\n    const y = columnar ? row : col;\n\n    res[i] = groups[x][y];\n  }\n  return res;\n}\n\nexport function merge(matrix: Matrix, phase: PHASE): Matrix {\n  const groups = splitGroups(matrix, phase);\n  const merged = groups.map((row) => mergeRow(row, phase));\n  const data = flattenGroups(merged, phase);\n  return { ...matrix, data };\n}\n\nexport function getIdx(x: number, y: number, width = 4): number {\n  return y * width + x;\n}\n\nexport function getX(idx: number, width = 4): number {\n  return idx % width;\n}\n\nexport function getY(idx: number, width = 4): number {\n  return Math.floor(idx / width);\n}\n","export function uuidv4(): string {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport function getZeroIndexes(lst: number[]): number[] {\n  return lst.reduce((m: number[], v, i) => (v === 0 ? [...m, i] : m), []);\n}\n\nexport function getRandomElement<T>(lst: T[]): T {\n  const idx = Math.floor(Math.random() * lst.length);\n  return lst[idx];\n}\n","\nimport { defineComponent, PropType } from \"@vue/runtime-core\";\nimport { getX, getY, Matrix } from \"@/gameplay\";\n\nexport default defineComponent({\n  props: {\n    state: {\n      type: Object as PropType<Matrix>,\n    },\n    playable: {\n      default: true,\n    },\n  },\n  setup() {\n    return {\n      getX,\n      getY,\n    };\n  },\n});\n","import { render } from \"./GameBoard.vue?vue&type=template&id=dbc055ae&scoped=true\"\nimport script from \"./GameBoard.vue?vue&type=script&lang=ts\"\nexport * from \"./GameBoard.vue?vue&type=script&lang=ts\"\n\nimport \"./GameBoard.vue?vue&type=style&index=0&id=dbc055ae&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-dbc055ae\"\n\nexport default script","import { isRef, onMounted, onUnmounted, Ref, ref, watch } from \"vue\";\nimport seedrandom from \"seedrandom\";\nimport { uuidv4 } from \"./util\";\n\nexport function useKey(key: string, cb: () => void): void {\n  const conditionalCb = (evt: KeyboardEvent) => {\n    if (evt.key === key) {\n      cb();\n    }\n  };\n\n  onMounted(() => {\n    document.addEventListener(\"keyup\", conditionalCb);\n  });\n\n  onUnmounted(() => {\n    document.removeEventListener(\"keyup\", conditionalCb);\n  });\n}\n\ninterface FullscreenHookResult {\n  toggleFullscreen: () => void;\n  isFullscreen: Ref<boolean>;\n}\n\nexport function useFullscreen(): FullscreenHookResult {\n  const isFullscreen = ref(!!document.fullscreenElement);\n\n  const cb = () => {\n    isFullscreen.value = !!document.fullscreenElement;\n  };\n\n  onMounted(() => {\n    document.addEventListener(\"fullscreenchange\", cb);\n  });\n\n  onUnmounted(() => {\n    document.removeEventListener(\"fullscreenchange\", cb);\n  });\n\n  function toggleFullscreen() {\n    const elem = document.querySelector(\"#app\");\n\n    if (elem && !document.fullscreenElement) {\n      elem.requestFullscreen().catch((err) => {\n        alert(\n          `Error attempting to enable full-screen mode: ${err.message} (${err.name})`\n        );\n      });\n    } else {\n      document.exitFullscreen();\n    }\n  }\n\n  return {\n    toggleFullscreen,\n    isFullscreen,\n  };\n}\n\ninterface SeedHookResult {\n  seed: Ref<string | undefined>;\n  reset: (v?: string) => string;\n}\nexport function useSeed(v?: Ref<string | undefined> | string): SeedHookResult {\n  const seed = ref(v || uuidv4());\n\n  function reset(v?: string): string {\n    const s = v || uuidv4();\n\n    if (isRef(seed)) {\n      seed.value = s;\n    }\n\n    seedrandom(s, { global: true });\n\n    return s;\n  }\n\n  reset(seed.value);\n\n  return {\n    seed,\n    reset,\n  };\n}\n\nexport function useParam(name: string): Ref<string | undefined> {\n  const qps = new URLSearchParams(window.location.search);\n  const seed = ref(qps.get(name) || undefined);\n\n  watch(\n    seed,\n    (val) => {\n      if (val) qps.set(name, val);\n      else qps.delete(name);\n\n      const url = window.location.pathname + \"?\" + qps.toString();\n      window.history.replaceState(null, \"\", url);\n    },\n    { immediate: true }\n  );\n\n  return seed;\n}\n","import { computed, ComputedRef, reactive, watch } from \"vue\";\nimport {\n  Matrix,\n  PHASE,\n  createGame,\n  equal,\n  merge,\n  insertRandom,\n  clone,\n} from \"./gameplay\";\nimport { getZeroIndexes } from \"./util\";\n\nconst calcScore = (game: Matrix) =>\n  game.data.reduce((mem, { value }) => mem + value, 0);\n\nexport class Twenty48 {\n  public game: Matrix;\n  public playable: ComputedRef<boolean>;\n  public score: ComputedRef<number>;\n\n  constructor() {\n    this.game = reactive<Matrix>(this.create());\n    this.playable = computed(() => this.isPlayable());\n    this.score = computed(() => calcScore(clone(this.game)));\n\n    watch(this.score, (currScore, prevScore) => {\n      if (currScore <= prevScore) {\n        console.error(`Error ${prevScore}->${currScore}`);\n      }\n    });\n  }\n\n  create(): Matrix {\n    let g = createGame();\n    g = insertRandom(g, {\n      times: 2,\n    });\n\n    return g;\n  }\n\n  reset(): void {\n    Object.assign(this.game, this.create());\n  }\n\n  play(phase: PHASE, dryrun = false): Matrix {\n    let nextGame = merge(clone(this.game), phase);\n\n    if (!equal(nextGame, this.game)) {\n      nextGame = insertRandom(nextGame);\n    }\n\n    if (!dryrun) Object.assign(this.game, nextGame);\n    return nextGame;\n  }\n\n  isPlayable(): boolean {\n    if (getZeroIndexes(this.game.data.map((v) => v.value)).length > 0)\n      return true;\n    return [PHASE.UP, PHASE.RIGHT, PHASE.DOWN, PHASE.LEFT].some(\n      (phase) => !equal(this.game, this.play(phase, true))\n    );\n  }\n}\n\nexport class Compress extends Twenty48 {\n  create(): Matrix {\n    const size = 4;\n    let g: Matrix | undefined;\n\n    // Alternate\n    // const validScore = (Math.log(calcScore(game)) / Math.log(2)) % 1 !== 0;\n    const validScore = (game: Matrix) => calcScore(game) !== 512;\n\n    do {\n      g = createGame(size, size);\n      g = insertRandom(g, {\n        times: size ** 2,\n        probability: [\n          [2, 6],\n          [4, 2],\n          [8, 1],\n          [16, 0.5],\n          [32, 0.25],\n          [64, 0.125],\n          [128, 0.125],\n        ],\n      });\n    } while (validScore(g));\n\n    if (g != null) {\n      return g;\n    } else {\n      throw new Error(\"could not find a game\");\n    }\n  }\n\n  play(phase: PHASE, dryrun = false): Matrix {\n    const nextGame = merge(clone(this.game), phase);\n    if (!dryrun) Object.assign(this.game, nextGame);\n    return nextGame;\n  }\n\n  isPlayable(): boolean {\n    return true;\n  }\n}\n","\nimport { defineComponent, ref } from \"vue\";\nimport GameBoard from \"./components/GameBoard.vue\";\nimport { PHASE } from \"./gameplay\";\nimport { useFullscreen, useKey, useParam, useSeed } from \"./hooks\";\nimport { Twenty48 } from \"./gamemode\";\n\nexport default defineComponent({\n  name: \"App\",\n\n  components: {\n    GameBoard,\n  },\n\n  setup() {\n    const seed = useParam(\"seed\");\n    const { reset: resetSeed } = useSeed(seed);\n    const { toggleFullscreen, isFullscreen } = useFullscreen();\n    const playCount = ref(0);\n\n    const zgame = new Twenty48();\n\n    function play(phase: PHASE) {\n      playCount.value++;\n      zgame.play(phase);\n    }\n\n    useKey(\"ArrowUp\", () => play(PHASE.UP));\n    useKey(\"ArrowDown\", () => play(PHASE.DOWN));\n    useKey(\"ArrowLeft\", () => play(PHASE.LEFT));\n    useKey(\"ArrowRight\", () => play(PHASE.RIGHT));\n\n    return {\n      reset: () => {\n        resetSeed();\n        zgame.reset();\n      },\n      game: zgame.game,\n      playable: zgame.playable,\n      score: zgame.score,\n      toggleFullscreen,\n      isFullscreen,\n      playCount,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=7888928c\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7888928c&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n"],"sourceRoot":""}